version: 2
jobs:
  build:

    docker:
      - image: elpaso/qgis-testing-environment:latest

    working_directory: /tests_directory/bkg-geocoder

    steps:

      - checkout

      - run:
          name: "Starting Xvfb"
          command: Xvfb :99 -screen 0 1280x1024x24
          background: true

      - run:
          name: "Setup QGIS Testing Environment"
          command: |
            qgis_setup.sh bkg-geocoder

      - run:
          name: "Run Unittests"
          command: |
            qgis_testrunner.sh bkg-geocoder.test.ci_tests
